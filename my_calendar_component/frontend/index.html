<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>테스트 컴포넌트</title>
    <script src="/_/streamlit_component_lib.js"></script>
</head>
<body>
    <div id="root">
        <h1>Test Component Loaded Successfully!</h1>
        <p>If you see this, the component base is working.</p>
    </div>
    <script>
        console.log("TEST COMPONENT: Script loaded!");
        window.addEventListener('load', function() {
            if (window.Streamlit) {
                console.log("TEST COMPONENT: Streamlit Component Library loaded: " + (!!window.Streamlit));
                Streamlit.setComponentReady();
                Streamlit.setFrameHeight(200); // 고정 높이 설정
                Streamlit.events.addEventListener(Streamlit.LIFECYCLE.AFTER_RERENDER, function(event) {
                    console.log("TEST COMPONENT: Received render event with args:", event.args);
                    // 이 부분에 아무런 복잡한 로직 없음.
                    Streamlit.setComponentValue("Test Value"); // 값 반환 시도
                });
                // 초기 렌더링을 위해 수동 호출
                Streamlit.setComponentReady(); // UI 변경이 없어도 다시 호출하여 상태 알림
            } else {
                console.error("TEST COMPONENT: Streamlit Component Library not found!");
            }
        });
    </script>
</body>
</html>
